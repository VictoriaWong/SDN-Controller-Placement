# coding: utf-8

from sklearn.metrics.pairwise import pairwise_distances
import numpy as np
from network_partition import network_partition
from controller_selection_placement import multiCtl_Select_Place
import struct, traceback

# ========================= test case ============================
# 3 points in dataset
# data = np.array([[1,1],
#                 [2,2],
#                 [6,6],
#                 [10,10]])
# clusterNum = 2
# arr_rate = [10, 20, 10, 30]
# proc_rate = [30]*4
# T_th = 12
# # distance matrix
# D = pairwise_distances(data, metric='euclidean')
#
# print("distance: %s" % D)


def readString(file, var):
    temp = file.read(4)
    length = struct.unpack("i", temp)[0]
    msg = file.read(length)
    var.append(msg)

file = open("/home/victoria/MEGA/Controller placement/topology/sprint_latency.txt", "rb")
D = np.load(file)
clusterNum = 2
cityname = []
networkname = []
countryid = []

with open("/home/victoria/MEGA/Controller placement/topology/sprint_city_mapping.txt", "rb") as file:
    while True:
        try:
            readString(file, cityname)
            readString(file, networkname)
            readString(file, countryid)
        except:
            traceback.print_exc()
            break

data = cityname

# split into 2 clusters
print("===========network partitioning results:=============")

M, C = network_partition(D, clusterNum)

# import pickle
# file1 = open("sprint_cluster.pkl", "wb")
# pickle.dump(C, file1)
# file1.close()
#
print('medoids:')
for point_idx in M:
    print(data[point_idx])

print('')
print('clustering result:')
for label in C:
    print("====================")
    print("%s cities in Cluster(%s)" % (len(C[label]), data[label]))
    print("ind: city")
    for point_idx in C[label]:
        print('{0}: {1},'.format(point_idx, data[point_idx]))
        # print('label {0}:ã€€{1}'.format(data[label], data[point_idx]))


# D_ = [[0.0, 35.0, 106.0, 74.0, 87.0, 81.0, 40.0, 69.0, 52.0],
#                   [35.0, 0.0, 72.0, 41.0, 51.0, 45.0, 5.0, 34.0, 25.0],
#                   [106.0, 72.0, 0.0, 44.0, 22.0, 50.0, 76.0, 40.0, 95.0],
#                   [74.0, 41.0, 44.0, 0.0, 12.0, 14.0, 45.0, 6.0, 64.0],
#                   [87.0, 51.0, 22.0, 12.0, 0.0, 26.0, 63.0, 22.0, 81.0],
#                   [81.0, 45.0, 50.0, 14.0, 26.0, 0.0, 49.0, 12.0, 70.0],
#                   [40.0, 5.0, 76.0, 45.0, 63.0, 49.0, 0.0, 40.0, 31.0],
#                   [69.0, 34.0, 40.0, 6.0, 22.0, 12.0, 40.0, 0.0, 60.0],
#                   [52.0, 25.0, 95.0, 64.0, 81.0, 70.0, 31.0, 60.0, 0.0]]


# D_ = [[0.0, 11.0, 16.0, 18.0, 16.0, 28.0, 22.0, 31.0, 37.0, 37.0, 34.0, 34.0, 39.0, 38.0, 59.0],
#                           [11.0, 0.0, 6.0, 7.0, 5.0, 17.0, 11.0, 18.0, 27.0, 23.0, 23.0, 24.0, 28.0, 28.0, 49.0],
#                           [16.0, 6.0, 0.0, 15.0, 4.0, 14.0, 6.0, 13.0, 20.0, 19.0, 20.0, 24.0, 26.0, 21.0, 45.0],
#                           [18.0, 7.0, 15.0, 0.0, 13.0, 10.0, 20.0, 25.0, 35.0, 32.0, 16.0, 16.0, 21.0, 35.0, 55.0],
#                           [16.0, 5.0, 4.0, 13.0, 0.0, 18.0, 10.0, 16.0, 24.0, 22.0, 24.0, 28.0, 29.0, 25.0, 45.0],
#                           [28.0, 17.0, 14.0, 10.0, 18.0, 0.0, 8.0, 15.0, 22.0, 21.0, 6.0, 10.0, 11.0, 24.0, 47.0],
#                           [22.0, 11.0, 6.0, 20.0, 10.0, 8.0, 0.0, 7.0, 14.0, 13.0, 14.0, 18.0, 20.0, 15.0, 35.0],
#                           [31.0, 18.0, 13.0, 25.0, 16.0, 15.0, 7.0, 0.0, 7.0, 7.0, 21.0, 25.0, 26.0, 22.0, 30.0],
#                           [37.0, 27.0, 20.0, 35.0, 24.0, 22.0, 14.0, 7.0, 0.0, 7.0, 28.0, 32.0, 33.0, 29.0, 41.0],
#                           [37.0, 23.0, 19.0, 32.0, 22.0, 21.0, 13.0, 7.0, 7.0, 0.0, 27.0, 31.0, 32.0, 28.0, 38.0],
#                           [34.0, 23.0, 20.0, 16.0, 24.0, 6.0, 14.0, 21.0, 28.0, 27.0, 0.0, 4.0, 17.0, 30.0, 53.0],
#                           [34.0, 24.0, 24.0, 16.0, 28.0, 10.0, 18.0, 25.0, 32.0, 31.0, 4.0, 0.0, 21.0, 33.0, 57.0],
#                           [39.0, 28.0, 26.0, 21.0, 29.0, 11.0, 20.0, 26.0, 33.0, 32.0, 17.0, 21.0, 0.0, 22.0, 55.0],
#                           [38.0, 28.0, 21.0, 35.0, 25.0, 24.0, 15.0, 22.0, 29.0, 28.0, 30.0, 33.0, 22.0, 0.0, 51.0],
#                           [59.0, 49.0, 45.0, 55.0, 45.0, 47.0, 35.0, 30.0, 41.0, 38.0, 53.0, 57.0, 55.0, 51.0, 0.0]]

# D_ = [[0.0, 5.0, 52.0, 18.0, 15.0, 26.0, 40.0, 50.0, 47.0, 47.0, 30.0, 50.0, 16.0, 89.0, 49.0, 20.0, 15.0, 21.0,
#          14.0, 17.0, 9.0, 8.0, 16.0, 50.0, 5.0, 19.0, 12.0, 27.0, 15.0, 44.0, 63.0, 51.0, 42.0, 50.0, 18.0, 31.0,
#          20.0, 55.0, 18.0, 19.0, 20.0, 52.0, 38.0, 26.0, 43.0],
#         [5.0, 0.0, 45.0, 11.0, 10.0, 31.0, 51.0, 43.0, 41.0, 42.0, 17.0, 45.0, 17.0, 93.0, 42.0, 16.0, 21.0, 20.0,
#          12.0, 22.0, 14.0, 3.0, 15.0, 54.0, 10.0, 27.0, 7.0, 20.0, 9.0, 49.0, 68.0, 56.0, 55.0, 54.0, 19.0, 26.0,
#          17.0, 49.0, 23.0, 14.0, 18.0, 47.0, 42.0, 21.0, 38.0],
#         [52.0, 45.0, 0.0, 34.0, 41.0, 46.0, 10.0, 2.0, 4.0, 16.0, 58.0, 20.0, 55.0, 54.0, 17.0, 58.0, 67.0, 61.0,
#          37.0, 41.0, 60.0, 42.0, 67.0, 8.0, 57.0, 73.0, 48.0, 25.0, 49.0, 87.0, 106.0, 94.0, 9.0, 65.0, 68.0, 67.0,
#          58.0, 5.0, 43.0, 53.0, 59.0, 22.0, 53.0, 60.0, 33.0],
#         [18.0, 11.0, 34.0, 0.0, 8.0, 22.0, 39.0, 32.0, 30.0, 37.0, 24.0, 38.0, 24.0, 84.0, 31.0, 23.0, 33.0, 27.0,
#          3.0, 13.0, 26.0, 8.0, 33.0, 42.0, 22.0, 37.0, 14.0, 9.0, 15.0, 60.0, 79.0, 67.0, 41.0, 45.0, 35.0, 33.0,
#          24.0, 38.0, 14.0, 19.0, 25.0, 45.0, 33.0, 26.0, 43.0],
#         [15.0, 10.0, 41.0, 8.0, 0.0, 25.0, 47.0, 39.0, 37.0, 32.0, 23.0, 33.0, 20.0, 91.0, 39.0, 22.0, 30.0, 26.0,
#          11.0, 21.0, 24.0, 7.0, 23.0, 49.0, 20.0, 39.0, 13.0, 17.0, 13.0, 59.0, 78.0, 66.0, 51.0, 53.0, 23.0, 32.0,
#          23.0, 45.0, 21.0, 18.0, 24.0, 37.0, 41.0, 25.0, 42.0],
#         [26.0, 31.0, 46.0, 22.0, 25.0, 0.0, 37.0, 39.0, 51.0, 62.0, 56.0, 59.0, 41.0, 77.0, 30.0, 39.0, 29.0, 43.0,
#          14.0, 5.0, 32.0, 28.0, 40.0, 33.0, 21.0, 25.0, 37.0, 30.0, 38.0, 50.0, 69.0, 57.0, 39.0, 33.0, 38.0, 49.0,
#          44.0, 49.0, 9.0, 42.0, 45.0, 59.0, 16.0, 46.0, 63.0],
#         [40.0, 51.0, 10.0, 39.0, 47.0, 37.0, 0.0, 8.0, 10.0, 23.0, 64.0, 23.0, 73.0, 49.0, 6.0, 67.0, 59.0, 61.0,
#          42.0, 23.0, 43.0, 48.0, 56.0, 1.0, 39.0, 64.0, 54.0, 31.0, 54.0, 78.0, 97.0, 85.0, 1.0, 56.0, 76.0, 72.0,
#          67.0, 13.0, 24.0, 59.0, 59.0, 28.0, 44.0, 66.0, 39.0],
#         [50.0, 43.0, 2.0, 32.0, 39.0, 39.0, 8.0, 0.0, 2.0, 15.0, 56.0, 16.0, 56.0, 52.0, 18.0, 55.0, 65.0, 59.0,
#          36.0, 40.0, 59.0, 40.0, 65.0, 9.0, 55.0, 69.0, 46.0, 24.0, 47.0, 86.0, 105.0, 93.0, 12.0, 64.0, 67.0, 65.0,
#          58.0, 7.0, 32.0, 51.0, 57.0, 20.0, 52.0, 59.0, 32.0],
#         [47.0, 41.0, 4.0, 30.0, 37.0, 51.0, 10.0, 2.0, 0.0, 13.0, 54.0, 16.0, 51.0, 54.0, 18.0, 53.0, 63.0, 57.0,
#          33.0, 43.0, 56.0, 38.0, 63.0, 12.0, 52.0, 67.0, 44.0, 21.0, 44.0, 88.0, 107.0, 95.0, 13.0, 66.0, 66.0,
#          63.0, 56.0, 6.0, 43.0, 49.0, 55.0, 18.0, 54.0, 56.0, 29.0],
#         [47.0, 42.0, 16.0, 37.0, 32.0, 62.0, 23.0, 15.0, 13.0, 0.0, 55.0, 1.0, 52.0, 67.0, 32.0, 54.0, 63.0, 58.0,
#          43.0, 52.0, 56.0, 39.0, 53.0, 24.0, 52.0, 71.0, 45.0, 25.0, 46.0, 91.0, 110.0, 98.0, 26.0, 79.0, 55.0,
#          64.0, 55.0, 22.0, 51.0, 50.0, 56.0, 5.0, 67.0, 57.0, 16.0],
#         [30.0, 17.0, 58.0, 24.0, 23.0, 56.0, 64.0, 56.0, 54.0, 55.0, 0.0, 56.0, 8.0, 107.0, 56.0, 7.0, 26.0, 3.0,
#          26.0, 40.0, 20.0, 16.0, 8.0, 66.0, 30.0, 30.0, 10.0, 33.0, 14.0, 53.0, 72.0, 60.0, 66.0, 68.0, 16.0, 14.0,
#          7.0, 63.0, 49.0, 19.0, 3.0, 60.0, 56.0, 22.0, 51.0],
#         [50.0, 45.0, 20.0, 38.0, 33.0, 59.0, 23.0, 16.0, 16.0, 1.0, 56.0, 0.0, 56.0, 68.0, 29.0, 55.0, 66.0, 64.0,
#          44.0, 56.0, 62.0, 42.0, 56.0, 27.0, 55.0, 67.0, 51.0, 29.0, 49.0, 92.0, 111.0, 99.0, 28.0, 79.0, 55.0,
#          65.0, 56.0, 28.0, 57.0, 56.0, 59.0, 11.0, 67.0, 63.0, 22.0],
#         [16.0, 17.0, 55.0, 24.0, 20.0, 41.0, 73.0, 56.0, 51.0, 52.0, 8.0, 56.0, 0.0, 104.0, 55.0, 2.0, 18.0, 5.0,
#          30.0, 34.0, 12.0, 13.0, 1.0, 66.0, 16.0, 22.0, 10.0, 30.0, 11.0, 47.0, 66.0, 54.0, 68.0, 65.0, 2.0, 6.0,
#          2.0, 63.0, 34.0, 21.0, 4.0, 57.0, 53.0, 23.0, 48.0],
#         [89.0, 93.0, 54.0, 84.0, 91.0, 77.0, 49.0, 52.0, 54.0, 67.0, 107.0, 68.0, 104.0, 0.0, 55.0, 106.0, 98.0,
#          108.0, 81.0, 72.0, 92.0, 91.0, 103.0, 48.0, 88.0, 102.0, 97.0, 75.0, 97.0, 127.0, 146.0, 134.0, 49.0,
#          105.0, 105.0, 110.0, 106.0, 59.0, 73.0, 102.0, 107.0, 72.0, 93.0, 109.0, 83.0],
#         [49.0, 42.0, 17.0, 31.0, 39.0, 30.0, 6.0, 18.0, 18.0, 32.0, 56.0, 29.0, 55.0, 55.0, 0.0, 55.0, 44.0, 58.0,
#          35.0, 18.0, 37.0, 39.0, 64.0, 9.0, 34.0, 47.0, 46.0, 22.0, 46.0, 72.0, 91.0, 79.0, 11.0, 51.0, 66.0, 65.0,
#          55.0, 22.0, 19.0, 50.0, 56.0, 37.0, 39.0, 58.0, 75.0],
#         [20.0, 16.0, 58.0, 23.0, 22.0, 39.0, 67.0, 55.0, 53.0, 54.0, 7.0, 55.0, 2.0, 106.0, 55.0, 0.0, 20.0, 4.0,
#          32.0, 35.0, 14.0, 15.0, 3.0, 68.0, 18.0, 26.0, 9.0, 32.0, 13.0, 49.0, 68.0, 56.0, 59.0, 67.0, 4.0, 8.0,
#          4.0, 63.0, 36.0, 20.0, 2.0, 59.0, 55.0, 23.0, 50.0],
#         [15.0, 21.0, 67.0, 33.0, 30.0, 29.0, 59.0, 65.0, 63.0, 63.0, 26.0, 66.0, 18.0, 98.0, 44.0, 20.0, 0.0, 23.0,
#          29.0, 26.0, 7.0, 23.0, 18.0, 60.0, 10.0, 6.0, 26.0, 42.0, 32.0, 31.0, 50.0, 38.0, 62.0, 59.0, 19.0, 24.0,
#          21.0, 71.0, 27.0, 34.0, 22.0, 67.0, 45.0, 42.0, 59.0],
#         [21.0, 20.0, 61.0, 27.0, 26.0, 43.0, 61.0, 59.0, 57.0, 58.0, 3.0, 64.0, 5.0, 108.0, 58.0, 4.0, 23.0, 0.0,
#          34.0, 37.0, 23.0, 19.0, 12.0, 79.0, 20.0, 27.0, 13.0, 36.0, 17.0, 52.0, 71.0, 59.0, 80.0, 69.0, 7.0, 12.0,
#          4.0, 67.0, 38.0, 16.0, 6.0, 63.0, 57.0, 19.0, 54.0],
#         [14.0, 12.0, 37.0, 3.0, 11.0, 14.0, 42.0, 36.0, 33.0, 43.0, 26.0, 44.0, 30.0, 81.0, 35.0, 32.0, 29.0, 34.0,
#          0.0, 9.0, 23.0, 10.0, 29.0, 43.0, 19.0, 38.0, 16.0, 12.0, 16.0, 58.0, 77.0, 65.0, 34.0, 42.0, 31.0, 35.0,
#          34.0, 42.0, 11.0, 21.0, 34.0, 45.0, 30.0, 28.0, 45.0],
#         [17.0, 22.0, 41.0, 13.0, 21.0, 5.0, 23.0, 40.0, 43.0, 52.0, 40.0, 56.0, 34.0, 72.0, 18.0, 35.0, 26.0, 37.0,
#          9.0, 0.0, 20.0, 19.0, 33.0, 24.0, 16.0, 37.0, 25.0, 22.0, 26.0, 55.0, 74.0, 62.0, 27.0, 33.0, 33.0, 44.0,
#          36.0, 35.0, 1.0, 30.0, 36.0, 55.0, 21.0, 37.0, 54.0],
#         [9.0, 14.0, 60.0, 26.0, 24.0, 32.0, 43.0, 59.0, 56.0, 56.0, 20.0, 62.0, 12.0, 92.0, 37.0, 14.0, 7.0, 23.0,
#          23.0, 20.0, 0.0, 17.0, 11.0, 53.0, 4.0, 10.0, 19.0, 35.0, 23.0, 35.0, 54.0, 42.0, 45.0, 53.0, 13.0, 18.0,
#          14.0, 65.0, 20.0, 28.0, 15.0, 61.0, 41.0, 35.0, 52.0],
#         [8.0, 3.0, 42.0, 8.0, 7.0, 28.0, 48.0, 40.0, 38.0, 39.0, 16.0, 42.0, 13.0, 91.0, 39.0, 15.0, 23.0, 19.0,
#          10.0, 19.0, 17.0, 0.0, 17.0, 49.0, 13.0, 27.0, 6.0, 17.0, 6.0, 52.0, 71.0, 59.0, 50.0, 52.0, 18.0, 25.0,
#          16.0, 45.0, 21.0, 11.0, 17.0, 44.0, 40.0, 18.0, 35.0],
#         [16.0, 15.0, 67.0, 33.0, 23.0, 40.0, 56.0, 65.0, 63.0, 53.0, 8.0, 56.0, 1.0, 103.0, 64.0, 3.0, 18.0, 12.0,
#          29.0, 33.0, 11.0, 17.0, 0.0, 66.0, 15.0, 22.0, 8.0, 42.0, 12.0, 46.0, 65.0, 53.0, 75.0, 64.0, 2.0, 7.0,
#          3.0, 73.0, 34.0, 22.0, 4.0, 60.0, 52.0, 23.0, 49.0],
#         [50.0, 54.0, 8.0, 42.0, 49.0, 33.0, 1.0, 9.0, 12.0, 24.0, 66.0, 27.0, 66.0, 48.0, 9.0, 68.0, 60.0, 79.0,
#          43.0, 24.0, 53.0, 49.0, 66.0, 0.0, 40.0, 57.0, 55.0, 32.0, 56.0, 79.0, 98.0, 86.0, 1.0, 57.0, 67.0, 75.0,
#          59.0, 12.0, 34.0, 61.0, 69.0, 29.0, 45.0, 67.0, 40.0],
#         [5.0, 10.0, 57.0, 22.0, 20.0, 21.0, 39.0, 55.0, 52.0, 52.0, 30.0, 55.0, 16.0, 88.0, 34.0, 18.0, 10.0, 20.0,
#          19.0, 16.0, 4.0, 13.0, 15.0, 40.0, 0.0, 14.0, 17.0, 31.0, 19.0, 39.0, 58.0, 46.0, 41.0, 49.0, 17.0, 36.0,
#          18.0, 60.0, 17.0, 24.0, 19.0, 57.0, 37.0, 31.0, 48.0],
#         [19.0, 27.0, 73.0, 37.0, 39.0, 25.0, 64.0, 69.0, 67.0, 71.0, 30.0, 67.0, 22.0, 102.0, 47.0, 26.0, 6.0, 27.0,
#          38.0, 37.0, 10.0, 27.0, 22.0, 57.0, 14.0, 0.0, 31.0, 50.0, 36.0, 25.0, 44.0, 32.0, 63.0, 58.0, 23.0, 30.0,
#          26.0, 75.0, 31.0, 38.0, 26.0, 71.0, 41.0, 59.0, 67.0],
#         [12.0, 7.0, 48.0, 14.0, 13.0, 37.0, 54.0, 46.0, 44.0, 45.0, 10.0, 51.0, 10.0, 97.0, 46.0, 9.0, 26.0, 13.0,
#          16.0, 25.0, 19.0, 6.0, 8.0, 55.0, 17.0, 31.0, 0.0, 23.0, 4.0, 54.0, 73.0, 61.0, 56.0, 58.0, 10.0, 19.0,
#          10.0, 53.0, 26.0, 17.0, 11.0, 50.0, 46.0, 32.0, 41.0],
#         [27.0, 20.0, 25.0, 9.0, 17.0, 30.0, 31.0, 24.0, 21.0, 25.0, 33.0, 29.0, 30.0, 75.0, 22.0, 32.0, 42.0, 36.0,
#          12.0, 22.0, 35.0, 17.0, 42.0, 32.0, 31.0, 50.0, 23.0, 0.0, 23.0, 69.0, 88.0, 76.0, 33.0, 54.0, 43.0, 42.0,
#          35.0, 31.0, 22.0, 28.0, 34.0, 30.0, 42.0, 35.0, 52.0],
#         [15.0, 9.0, 49.0, 15.0, 13.0, 38.0, 54.0, 47.0, 44.0, 46.0, 14.0, 49.0, 11.0, 97.0, 46.0, 13.0, 32.0, 17.0,
#          16.0, 26.0, 23.0, 6.0, 12.0, 56.0, 19.0, 36.0, 4.0, 23.0, 0.0, 58.0, 77.0, 65.0, 58.0, 58.0, 13.0, 23.0,
#          13.0, 52.0, 27.0, 18.0, 17.0, 50.0, 46.0, 25.0, 41.0],
#         [44.0, 49.0, 87.0, 60.0, 59.0, 50.0, 78.0, 86.0, 88.0, 91.0, 53.0, 92.0, 47.0, 127.0, 72.0, 49.0, 31.0,
#          52.0, 58.0, 55.0, 35.0, 52.0, 46.0, 79.0, 39.0, 25.0, 54.0, 69.0, 58.0, 0.0, 69.0, 57.0, 79.0, 83.0, 48.0,
#          53.0, 49.0, 90.0, 55.0, 63.0, 50.0, 96.0, 66.0, 69.0, 87.0],
#         [63.0, 68.0, 106.0, 79.0, 78.0, 69.0, 97.0, 105.0, 107.0, 110.0, 72.0, 111.0, 66.0, 146.0, 91.0, 68.0, 50.0,
#          71.0, 77.0, 74.0, 54.0, 71.0, 65.0, 98.0, 58.0, 44.0, 73.0, 88.0, 77.0, 69.0, 0.0, 76.0, 98.0, 102.0, 67.0,
#          72.0, 68.0, 109.0, 74.0, 82.0, 69.0, 115.0, 85.0, 88.0, 106.0],
#         [51.0, 56.0, 94.0, 67.0, 66.0, 57.0, 85.0, 93.0, 95.0, 98.0, 60.0, 99.0, 54.0, 134.0, 79.0, 56.0, 38.0,
#          59.0, 65.0, 62.0, 42.0, 59.0, 53.0, 86.0, 46.0, 32.0, 61.0, 76.0, 65.0, 57.0, 76.0, 0.0, 86.0, 90.0, 55.0,
#          60.0, 56.0, 97.0, 62.0, 70.0, 57.0, 103.0, 73.0, 76.0, 94.0],
#         [42.0, 55.0, 9.0, 41.0, 51.0, 39.0, 1.0, 12.0, 13.0, 26.0, 66.0, 28.0, 68.0, 49.0, 11.0, 59.0, 62.0, 80.0,
#          34.0, 27.0, 45.0, 50.0, 75.0, 1.0, 41.0, 63.0, 56.0, 33.0, 58.0, 79.0, 98.0, 86.0, 0.0, 57.0, 68.0, 77.0,
#          71.0, 14.0, 27.0, 61.0, 70.0, 30.0, 45.0, 69.0, 41.0],
#         [50.0, 54.0, 65.0, 45.0, 53.0, 33.0, 56.0, 64.0, 66.0, 79.0, 68.0, 79.0, 65.0, 105.0, 51.0, 67.0, 59.0,
#          69.0, 42.0, 33.0, 53.0, 52.0, 64.0, 57.0, 49.0, 58.0, 58.0, 54.0, 58.0, 83.0, 102.0, 90.0, 57.0, 0.0, 66.0,
#          71.0, 67.0, 68.0, 34.0, 63.0, 68.0, 84.0, 17.0, 70.0, 87.0],
#         [18.0, 19.0, 68.0, 35.0, 23.0, 38.0, 76.0, 67.0, 66.0, 55.0, 16.0, 55.0, 2.0, 105.0, 66.0, 4.0, 19.0, 7.0,
#          31.0, 33.0, 13.0, 18.0, 2.0, 67.0, 17.0, 23.0, 10.0, 43.0, 13.0, 48.0, 67.0, 55.0, 68.0, 66.0, 0.0, 8.0,
#          5.0, 71.0, 35.0, 23.0, 6.0, 59.0, 54.0, 33.0, 51.0],
#         [31.0, 26.0, 67.0, 33.0, 32.0, 49.0, 72.0, 65.0, 63.0, 64.0, 14.0, 65.0, 6.0, 110.0, 65.0, 8.0, 24.0, 12.0,
#          35.0, 44.0, 18.0, 25.0, 7.0, 75.0, 36.0, 30.0, 19.0, 42.0, 23.0, 53.0, 72.0, 60.0, 77.0, 71.0, 8.0, 0.0,
#          8.0, 70.0, 45.0, 36.0, 10.0, 69.0, 59.0, 30.0, 60.0],
#         [20.0, 17.0, 58.0, 24.0, 23.0, 44.0, 67.0, 58.0, 56.0, 55.0, 7.0, 56.0, 2.0, 106.0, 55.0, 4.0, 21.0, 4.0,
#          34.0, 36.0, 14.0, 16.0, 3.0, 59.0, 18.0, 26.0, 10.0, 35.0, 13.0, 49.0, 68.0, 56.0, 71.0, 67.0, 5.0, 8.0,
#          0.0, 62.0, 35.0, 20.0, 2.0, 59.0, 55.0, 23.0, 53.0],
#         [55.0, 49.0, 5.0, 38.0, 45.0, 49.0, 13.0, 7.0, 6.0, 22.0, 63.0, 28.0, 63.0, 59.0, 22.0, 63.0, 71.0, 67.0,
#          42.0, 35.0, 65.0, 45.0, 73.0, 12.0, 60.0, 75.0, 53.0, 31.0, 52.0, 90.0, 109.0, 97.0, 14.0, 68.0, 71.0,
#          70.0, 62.0, 0.0, 38.0, 58.0, 62.0, 27.0, 56.0, 65.0, 38.0],
#         [18.0, 23.0, 43.0, 14.0, 21.0, 9.0, 24.0, 32.0, 43.0, 51.0, 49.0, 57.0, 34.0, 73.0, 19.0, 36.0, 27.0, 38.0,
#          11.0, 1.0, 20.0, 21.0, 34.0, 34.0, 17.0, 31.0, 26.0, 22.0, 27.0, 55.0, 74.0, 62.0, 27.0, 34.0, 35.0, 45.0,
#          35.0, 38.0, 0.0, 31.0, 37.0, 53.0, 22.0, 38.0, 56.0],
#         [19.0, 14.0, 53.0, 19.0, 18.0, 42.0, 59.0, 51.0, 49.0, 50.0, 19.0, 56.0, 21.0, 102.0, 50.0, 20.0, 34.0,
#          16.0, 21.0, 30.0, 28.0, 11.0, 22.0, 61.0, 24.0, 38.0, 17.0, 28.0, 18.0, 63.0, 82.0, 70.0, 61.0, 63.0, 23.0,
#          36.0, 20.0, 58.0, 31.0, 0.0, 17.0, 55.0, 51.0, 7.0, 46.0],
#         [20.0, 18.0, 59.0, 25.0, 24.0, 45.0, 59.0, 57.0, 55.0, 56.0, 3.0, 59.0, 4.0, 107.0, 56.0, 2.0, 22.0, 6.0,
#          34.0, 36.0, 15.0, 17.0, 4.0, 69.0, 19.0, 26.0, 11.0, 34.0, 17.0, 50.0, 69.0, 57.0, 70.0, 68.0, 6.0, 10.0,
#          2.0, 62.0, 37.0, 17.0, 0.0, 61.0, 56.0, 19.0, 52.0],
#         [52.0, 47.0, 22.0, 45.0, 37.0, 59.0, 28.0, 20.0, 18.0, 5.0, 60.0, 11.0, 57.0, 72.0, 37.0, 59.0, 67.0, 63.0,
#          45.0, 55.0, 61.0, 44.0, 60.0, 29.0, 57.0, 71.0, 50.0, 30.0, 50.0, 96.0, 115.0, 103.0, 30.0, 84.0, 59.0,
#          69.0, 59.0, 27.0, 53.0, 55.0, 61.0, 0.0, 72.0, 62.0, 12.0],
#         [38.0, 42.0, 53.0, 33.0, 41.0, 16.0, 44.0, 52.0, 54.0, 67.0, 56.0, 67.0, 53.0, 93.0, 39.0, 55.0, 45.0, 57.0,
#          30.0, 21.0, 41.0, 40.0, 52.0, 45.0, 37.0, 41.0, 46.0, 42.0, 46.0, 66.0, 85.0, 73.0, 45.0, 17.0, 54.0, 59.0,
#          55.0, 56.0, 22.0, 51.0, 56.0, 72.0, 0.0, 58.0, 75.0],
#         [26.0, 21.0, 60.0, 26.0, 25.0, 46.0, 66.0, 59.0, 56.0, 57.0, 22.0, 63.0, 23.0, 109.0, 58.0, 23.0, 42.0,
#          19.0, 28.0, 37.0, 35.0, 18.0, 23.0, 67.0, 31.0, 59.0, 32.0, 35.0, 25.0, 69.0, 88.0, 76.0, 69.0, 70.0, 33.0,
#          30.0, 23.0, 65.0, 38.0, 7.0, 19.0, 62.0, 58.0, 0.0, 53.0],
#         [43.0, 38.0, 33.0, 43.0, 42.0, 63.0, 39.0, 32.0, 29.0, 16.0, 51.0, 22.0, 48.0, 83.0, 75.0, 50.0, 59.0, 54.0,
#          45.0, 54.0, 52.0, 35.0, 49.0, 40.0, 48.0, 67.0, 41.0, 52.0, 41.0, 87.0, 106.0, 94.0, 41.0, 87.0, 51.0,
#          60.0, 53.0, 38.0, 56.0, 46.0, 52.0, 12.0, 75.0, 53.0, 0.0]]
#
# M_, C_ = network_partition(np.array(D_), 9)
#
# cluster_center = 21
#
# print('medoids:')
# for point_idx in M_:
#     print(C[cluster_center][point_idx], data[C[cluster_center][point_idx]])
#
# print('')
# print('clustering result:')
# for label in C_:
#     print("====================")
#     print("%s cities in Cluster(%s-%s)" % (len(C_[label]), C[cluster_center][label],  data[C[cluster_center][label]]))
#     print("ind: city")
#     for point_idx in C_[label]:
#         print('{0}: {1},'.format(C[cluster_center][point_idx], data[C[cluster_center][point_idx]]))
#         # print('label {0}:ã€€{1}'.format(data[label], data[point_idx]))



# print("\n")
# print("===========controller placement results:=============")
# placement = []
# for key in C:
#     print("\n")
#     print("cluster with centroid %s: coordinate %s" % (key,data[key]))
#     temp = multiCtl_Select_Place(C[key], arr_rate, proc_rate, D, T_th)
#     placement.extend(temp)
#
# print('placements:')
# for point_idx in placement:
#     print(data[point_idx])


# draw figure
# try: # plot the result using networkx and matplotlib
#     import networkx as nx
#     import matplotlib.pyplot as P
#     P.clf()
#     G = nx.Graph()
#     m,n = D.shape
#
#     for i in range(m):
#         for j in range(i,n):
#             G.add_edge(i,j, length= D[i][j])
#
#     pos = nx.spring_layout(G)
#     color_map = ['blue'] * len(G.nodes())
#     for c in placement:
#         color_map[c] = 'red'
#
#     nx.draw_networkx(G, pos, node_color=color_map,
#                          with_labels=True)  # with_labels=true is to show the node number in the output graph
#     edge_labels = nx.get_edge_attributes(G, 'length')
#     nx.draw_networkx_edge_labels(G, pos, edge_labels=edge_labels, font_size=11,
#                                      label_pos=0.55)  # prints weight on all the edges
#
#     P.show()
# except ImportError:
#     print("install 'networkx' and 'matplotlib' for plotting")